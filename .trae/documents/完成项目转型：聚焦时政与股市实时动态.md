# 调整 AI 推送项目以适应新需求

## 完成的工作

### 1. 核心配置更新

* **文件**: `news_crawler/config.py`

* **内容**: 更新了 `TARGET_SECTORS` 列表，移除了旧的板块（如雅江水电、稀土等），添加了用户指定的新板块：半导体、黄金、CPO、通信、半导体设备、机器人、人工智能、白酒、高端制造、航天。

### 2. 新增 CCTV 新闻联播抓取器

* **文件**: `news_crawler/cctv_news.py` (新建)

* **功能**: 专门用于抓取央视网（news.cctv.com）的《新闻联播》节目主要内容。

* **逻辑**: 自动寻找最新的“新闻联播”且包含“主要内容”的文章，提取摘要。

### 3. 爬虫调度调整

* **文件**: `news_crawler/__init__.py`

* **调整**:

  * 移除了所有 AI 专用的爬虫（`AINewsCrawler`, `AIOfficialBlogsCrawler`, `AIResearchCrawler`, `AIPlatformCrawler`）。

  * 注册了新的 `CCTVNewsCrawler`。

  * 保留并确认了 `PolicyWatchCrawler`（时政/会议）、`MultiPolicyCrawler`（政策发布）、`SectorOpenCrawler`（板块行情）、`EastMoneyFlashCrawler`（财经快讯）的启用状态。

### 4. 主程序逻辑重构

* **文件**: `main.py`

* **分类逻辑**:

  * **CCTV 新闻联播**: 独立识别，单独推送。

  * **时政/政策**: 聚合主要会议和政策发布，生成带编号的列表。

  * **股市/行业**: 聚合板块动态和实时新闻，生成带编号的列表。

* **推送优化**:

  * 实现了聚合推送功能，将多条新闻合并为一条消息发送，避免消息轰炸。

  * 格式优化为数字编号列表：

    ```
    1. 标题
       摘要内容...
    2. 标题
       摘要内容...
    ```

  * 修复了处理过程中可能因内容为空导致的程序崩溃问题。

### 5. 摘要提示词更新

* **文件**: `summarizer/openai_summarizer.py`

* **内容**: 更新了 AI 摘要的 Prompt，使其在评估影响时专注于新的目标板块（半导体、黄金、CPO等），并修复了摘要过程中丢失标签（Tags）的问题，确保分类准确。

## 后续建议

* **运行验证**: 建议观察一天的运行情况，特别是晚上 19:30 后的新闻联播推送是否正常。

* **API 配额**: 由于增加了对时政和股市新闻的聚合摘要，请留意 OpenAI/OpenRouter 的 API 使用量。

* **推送通道**: 请确保 WxPusher 的 Token 配置正确，以便接收推送。

